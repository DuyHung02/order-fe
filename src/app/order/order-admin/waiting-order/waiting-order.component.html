<div class="content-body">
  <!-- row -->
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">Đơn hàng đang chờ</h4>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover table-responsive-md">
                <thead>
                <tr>
                  <th><strong>MHĐ</strong></th>
                  <th><strong>Người đặt</strong></th>
                  <th><strong>Tổng món</strong></th>
                  <th><strong>Giá đơn</strong></th>
                  <th><strong>Trạng thái</strong></th>
                  <!--                  <th><strong>Thời gian đặt</strong></th>-->
                  <th><strong>Chi tiết</strong></th>
                  <th><strong></strong></th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let o of orders; let i = index">
                  <td><strong>{{o?.id}}</strong></td>
                  <td>
                    <div class="d-flex align-items-center"><img class="avt" src="{{o?.user?.profile?.avatar}}"
                    /> <span
                      class="w-space-no">{{o?.user?.profile?.last_name}}</span></div>
                  </td>
                  <td>{{o?.total_product}}</td>
                  <td>{{o?.total_price}}</td>
                  <td>
                    <div class="d-flex align-items-center"><i
                      class="fa fa-circle text-warning me-1"></i> Đang chờ
                    </div>
                  </td>
                  <!--                  <td>{{o?.create_at?.getDate()}}</td>-->
                  <td><div class="d-flex">
                    <a href="#" class="btn btn-primary shadow btn-sm sharp me-4"><i
                      class="fa fa-search"></i></a>
                  </div></td>
                  <td>
                    <div class="d-flex">
                      <a (click)="confirmOrder(o?.id)" class="btn btn-primary shadow btn-sm sharp me-4 w-50">Hoàn thành</a>
                      <a (click)="openCancelModal(o?.id)" class="btn btn-danger shadow btn-sm sharp"><i
                        class="fa fa-trash"></i></a>
                    </div>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #cancelModal>
  <div class="modal-content">
    <form [formGroup]="formCancelOrder" (ngSubmit)="cancelOrder()">
      <div class="modal-header">
        <h5 class="modal-title">Hủy đơn</h5>
        <button type="button" class="btn-close" (click)="hideModal()"></button>
      </div>
      <div class="modal-body row">
        <div class="col-lg-6">
          <label class="form-label" for="reason">Lý do hủy
            <span class="text-danger">*</span>
          </label>
          <select class="default-select wide form-control ms-0" id="reason"
                  formControlName="reason" [(ngModel)]="defaultReason" (change)="openOtherReason()">
            <option value="Đặt sai món" selected>Đặt sai món</option>
            <option value="Đổi món">Đổi món</option>
            <option value="Đặt thêm">Đặt thêm</option>
            <option value="other">khác...</option>
          </select>
        </div>
        <div class="col-lg-6" *ngIf="onOtherReason == true">
          <label class="form-label" for="otherReason">Lý do khác
            <span class="text-danger">*</span>
          </label>
          <input id="otherReason" class="form-control" type="text" placeholder="Lý do hủy..."
                 formControlName="otherReason">
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-danger light btn-sm" data-bs-dismiss="modal">Đóng</button>
        <button type="submit" class="btn btn-primary btn-sm">Hủy đơn</button>
      </div>
    </form>
  </div>
</ng-template>
